@layout AdminLayout
@page "/admin/category"


<MudGrid Spacing="1" Justify="Justify.Center">
    <MudItem xs="2"><AddCategoryComponent OnAddedItem="@(()=> LoadData())" /></MudItem>
    <MudItem xs="10"><CategoryListComponent CountData="DataCount" Categories="Categories" OnDeletedItem="@(()=> LoadData())" OnPageChanged="@((args)=> LoadData((int)args - 1))" /></MudItem>
</MudGrid>

@code {
    [Inject]
    ICategoryService CategoryService { get; set; }

    public IEnumerable<ListCategory> Categories { get; set; }
    public int DataCount { get; set; }
    protected override async Task OnInitializedAsync()
    {
        await LoadData(0, 5);
    }
    public async Task LoadData(int page = 0, int size = 5)
    {
        var data = (await CategoryService.GetCategoryList(page, size));
        Categories = data.listCategories;
        DataCount = data.totalCategoryCount;
    }
}